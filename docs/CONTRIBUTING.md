# Contributing to `pacaptr`

Welcome to `pacaptr`!

Please note that this project is in a very early stage, and the conventions and the APIs could be changed. Some discussions concerning certain crucial design choices haven't been made yet.

## Contents

- [Contributing to `pacaptr`](#contributing-to-pacaptr)
  - [Contents](#contents)
  - [Style Conventions](#style-conventions)
  - [Project Structure](#project-structure)

## Style Conventions

- Rust code: `rustfmt`, default settings.
- Commit message: See [Semantic Commit Messages](https://gist.github.com/joshbuchea/6f47e86d2510bce28f8e7f42ae84c716).

## Project Structure

Please note that this is subject to change.

- `dispatch`:
  This module handles argument parsing and environment detection. The `Opt` structure is generated by `clap`,
  which then generates the correct `package_manager::PackageManager` trait object according to the environmental context,
  and then call the corresponding trait method.

    ```rust
    mod dispatch {
        #[derive(Clap)]
        struct Opt;
    }
    ```

- `error`:
  This module defines the basic error type used in this crate. `Anyhow`? It's possible! Not just yet...

    ```rust
    mod error;
    ```

- `exec`:
  This module launches subprocesses.
  
    ```rust
    mod exec {
        enum Mode {
            DryRun,
            Mute,
            ..
        }

        fn exec( .. ) -> Result< .. , error::Error>;
        ..
    }
    ```

- `print`:  
  This module handles output format.

- `package_manager`:
  Here is where the things really happen. If you want to add package manager support, please declare submodules here.

    ```rust
    mod packagemanager {
        mod homebrew {
            struct Homebrew;

            impl Homebrew {
                fn suy( .. ) -> Result< .. , error::Error>;
                ..
            }
        }
        ..

        trait PackageManager { .. }
    }
    ```
